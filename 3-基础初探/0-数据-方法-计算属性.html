<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
    <div id="root">

    </div>
</body>
<script>
    //！！！当计算属性computed依赖的内容发生变更时，才会重新执行计算；因此如果想让其重新计算，就把依赖内容添加上
    //！！！methods中函数只要页面重新渲染，会重新计算
    //计算属性内部采用了缓存机制，因此，如果可以同时使用计算属性和函数，优先使用计算属性
    const app = Vue.createApp({
        data() {
            return {
                message: 'init',
                //可以在差值表达式中使用计算表达式
                count: 2,
                price: 5,
            }
        },
        //1.计算属性 在该对象中写入计算属性+计算方法 在vm中修改算数结果也会随之变动
        computed: {
            total() {
                return this.count * this.price
            },
            date() {
                return new Date() + this.count
            }
        },
        methods: {
            //this绑定到vue对象
            handleClick() {
                console.log('click', this.message)
            },
            //可在差值表达式中使用自定义函数
            formatString(string) {
                return string.toUpperCase()
            },
            //2.可以在方法定义计算函数
            getTotal() {
                return new Date() + this.count * this.price + this.message
            }
            //注意 如果使用=>写法 this就不管用了 此时指向windows对象;所以声明methods函数不要使用箭头函数
            // handleClick:()=>{
            //     console.log('click',this.message)
            // }
        },
        template: `
            <div
            @click='handleClick'
            >
            {{formatString(message)}},<br/>
            {{count*price}},<br/>
            {{total}},<br/>
            {{getTotal()}},<br/>
            {{date}},<br/>
            </div>
        `
    })
    const vm = app.mount('#root')
</script>

</html>